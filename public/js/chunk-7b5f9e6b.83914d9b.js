(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b5f9e6b"],{"0ca7":function(e,t,n){},"3b8c":function(e,t,n){"use strict";n.r(t);var c=n("f2bf"),r=Object(c["l"])("新增角色+"),u={class:"table-action"};function i(e,t,n,i,o,a){var d=Object(c["K"])("a-button"),l=Object(c["K"])("a-table"),s=Object(c["K"])("a-card"),f=Object(c["K"])("a-col"),b=Object(c["K"])("add-edit-user-role"),m=Object(c["K"])("a-row");return Object(c["D"])(),Object(c["j"])(m,null,{default:Object(c["V"])((function(){return[Object(c["m"])(f,{span:24},{default:Object(c["V"])((function(){return[Object(c["m"])(s,null,{default:Object(c["V"])((function(){return[Object(c["m"])(d,{type:"primary",style:{margin:"10px 0px"},onClick:i.addRole},{default:Object(c["V"])((function(){return[r]})),_:1},8,["onClick"]),Object(c["m"])(l,{dataSource:i.data,bordered:"",rowKey:"_id",columns:i.columns},{status:Object(c["V"])((function(e){var t=e.text;return[Object(c["m"])("div",null,Object(c["N"])(i.statusMapFilter(t)),1)]})),action:Object(c["V"])((function(e){e.text;var t=e.record;return[Object(c["m"])("ul",u,[Object(c["m"])("li",null,[Object(c["m"])("a",{onClick:function(e){return i.editRole(t)}}," 编辑 ",8,["onClick"])]),Object(c["m"])("li",null,[Object(c["m"])("a",{onClick:function(e){return i.delRole(t._id)}}," 删除 ",8,["onClick"])])])]})),_:1},8,["dataSource","columns"])]})),_:1})]})),_:1}),Object(c["m"])(b,{ref:"role",onRefresh:i.refresh},null,8,["onRefresh"])]})),_:1})}var o=n("5530"),a=n("cf7c"),d=(n("b0c0"),Object(c["X"])("data-v-18bebd06"));Object(c["G"])("data-v-18bebd06");var l={class:"role-menu"};Object(c["E"])();var s=d((function(e,t,n,r,u,i){var o=Object(c["K"])("a-input"),a=Object(c["K"])("a-form-item"),s=Object(c["K"])("a-textarea"),f=Object(c["K"])("a-checkbox"),b=Object(c["K"])("a-form"),m=Object(c["K"])("a-modal");return Object(c["D"])(),Object(c["j"])(m,{visible:e.visible,"onUpdate:visible":t[3]||(t[3]=function(t){return e.visible=t}),width:700,"ok-text":"确认","cancel-text":"取消",title:1==e.type?"新增角色":"编辑角色",onOk:r.submitHandle,onCancel:r.cancel},{default:d((function(){return[Object(c["m"])(b,{ref:"formRef",model:r.form,rules:r.rules,"label-col":{span:4},"wrapper-col":{span:14}},{default:d((function(){return[Object(c["m"])(a,{ref:"name",label:"角色名称",name:"name"},{default:d((function(){return[Object(c["m"])(o,{value:r.form.name,"onUpdate:value":t[1]||(t[1]=function(e){return r.form.name=e}),valueModifiers:{trim:!0}},null,8,["value"])]})),_:1},512),Object(c["m"])(a,{label:"角色描述",name:"describe"},{default:d((function(){return[Object(c["m"])(s,{value:r.form.describe,"onUpdate:value":t[2]||(t[2]=function(e){return r.form.describe=e}),valueModifiers:{trim:!0}},null,8,["value"])]})),_:1}),Object(c["m"])(a,{label:"角色权限",name:"menuList"},{default:d((function(){return[Object(c["m"])("ul",l,[(Object(c["D"])(!0),Object(c["j"])(c["b"],null,Object(c["J"])(e.menuList,(function(e){return Object(c["D"])(),Object(c["j"])("li",{key:e._id},[Object(c["m"])(f,{checked:e.isChecked,"onUpdate:checked":function(t){return e.isChecked=t},indeterminate:e.indeterminate,onChange:function(t){return r.onChangeT1(t,e)}},{default:d((function(){return[Object(c["l"])(Object(c["N"])(e.name),1)]})),_:2},1032,["checked","onUpdate:checked","indeterminate","onChange"]),(Object(c["D"])(!0),Object(c["j"])(c["b"],null,Object(c["J"])(e.children,(function(t){return Object(c["D"])(),Object(c["j"])("div",{class:"menu-t2",key:t._id},[Object(c["m"])(f,{checked:t.isChecked,"onUpdate:checked":function(e){return t.isChecked=e},onChange:function(n){return r.onChangeT2(n,t,e)},indeterminate:t.indeterminate},{default:d((function(){return[Object(c["l"])(Object(c["N"])(t.name),1)]})),_:2},1032,["checked","onUpdate:checked","onChange","indeterminate"]),(Object(c["D"])(!0),Object(c["j"])(c["b"],null,Object(c["J"])(t.children,(function(n){return Object(c["D"])(),Object(c["j"])("div",{class:"menu-t3",key:n._id},[Object(c["m"])(f,{checked:n.isChecked,"onUpdate:checked":function(e){return n.isChecked=e},onChange:function(){return r.onChangeT3(e,t)}},{default:d((function(){return[Object(c["l"])(Object(c["N"])(n.name),1)]})),_:2},1032,["checked","onUpdate:checked","onChange"])])})),128))])})),128))])})),128))])]})),_:1})]})),_:1},8,["model","rules"])]})),_:1},8,["visible","title","onOk","onCancel"])})),f=n("1da1"),b=(n("159b"),n("4de4"),n("96cf"),n("f64c")),m={name:[{required:!0,message:"请输入",trigger:"blur",type:"string"}],describe:[{required:!0,message:"请输入",trigger:"blur",type:"string"}]},h={setup:function(e,t){var n=Object(c["H"])({name:null,describe:null,id:null,roleMenuList:[]}),r=Object(c["H"])({type:1,visible:!1,formRef:Object(c["I"])(),menuList:[]}),u=function(){r.formRef.validate().then((function(){O(r.menuList,n.roleMenuList),1!=r.type?Object(a["g"])(n).then((function(e){j(e)})):Object(a["d"])(n).then((function(e){j(e)}))}))},i=function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.type=1,C(),l();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(e){r.type=2,C();var t=e.name,c=e.describe,u=e._id;Object.assign(n,{name:t,describe:c,id:u}),s()},l=function(){Object(a["i"])().then((function(e){r.menuList=e.data,h(r.menuList)}))},s=function(){Object(a["j"])(n.id).then((function(e){r.menuList=e.data,h(r.menuList)}))},h=function e(t){t.forEach((function(t){t.isChecked=!1,t.indeterminate=!1,1==t.isChange&&(t.isChecked=!0),t.children.length>0&&e(t.children,t.isChecked)}))},j=function(e){1==e.code&&(b["a"].success("操作成功"),t.emit("refresh"),r.visible=!1)},O=function e(t,n){t.forEach((function(t){(t.isChecked||t.indeterminate)&&n.push(t._id),t.children.length>0&&e(t.children,n)}))},g=function e(t,n){t.forEach((function(t){t.isChecked=n,t.children.length>0&&e(t.children,n)}))},p=function(e,t){g(t.children,e.target.checked),t.indeterminate=!1},v=function(e,t,n){g(t.children,e.target.checked),t.indeterminate=!1,n.isChecked=n.children.every((function(e){return e.isChecked}));var c=n.children.filter((function(e){return e.isChecked})).length;n.indeterminate=c!=n.children.length&&0!=c},k=function(e,t){var n=t.children.filter((function(e){return e.isChecked})).length;t.indeterminate=0!=n&&n!=t.children.length,t.isChecked=n==t.children.length,e.isChecked=e.children.every((function(e){return e.isChecked}));var c=e.children.some((function(e){return e.indeterminate})),r=e.children.every((function(e){return e.isChecked}));e.indeterminate=c||!r},C=function(){r.visible=!0,r.menuList=[],Object.assign(n,{name:null,describe:null,id:null,roleMenuList:[]})},M=function(){r.formRef.resetFields()};return Object(o["a"])(Object(o["a"])({form:n,rules:m},Object(c["Q"])(r)),{},{submitHandle:u,showAddModal:i,showEditModal:d,getMenuList:l,onChangeT1:p,onChangeT2:v,onChangeT3:k,cancel:M})}};n("f405");h.render=s,h.__scopeId="data-v-18bebd06";var j=h,O=n("ed3b"),g={0:"已停用",1:"使用中"},p=[{title:"角色名称",dataIndex:"name",align:"center"},{title:"状态",dataIndex:"status",align:"center",slots:{customRender:"status"}},{title:"角色描述",dataIndex:"describe",align:"center"},{title:"角色权限",dataIndex:"name",align:"center"},{title:"操作",dataIndex:"action",align:"center",slots:{customRender:"action"}}],v={components:{AddEditUserRole:j},setup:function(){var e=Object(c["I"])([]),t=Object(c["I"])(null),n=Object(c["H"])({queryInfo:{pageSize:10,pageNumber:1}}),r=function(){Object(a["m"])(n.queryInfo).then((function(t){e.value=t.data}))},u=function(){r()},i=function(){t.value.showAddModal()},d=function(e){t.value.showEditModal(e)},l=function(e){O["a"].confirm({title:"确认要执行操作吗?",okText:"确认",cancelText:"取消",onOk:function(){Object(a["o"])(e).then((function(e){1==e.code&&(b["a"].success("操作成功"),r())}))}})};Object(c["A"])((function(){r()}));var s=function(e){return g[e]};return Object(o["a"])(Object(o["a"])({columns:p,statusMap:g,data:e},Object(c["Q"])(n)),{},{statusMapFilter:s,refresh:u,getList:r,addRole:i,editRole:d,delRole:l,role:t})}};v.render=i;t["default"]=v},cf7c:function(e,t,n){"use strict";n.d(t,"m",(function(){return u})),n.d(t,"d",(function(){return i})),n.d(t,"g",(function(){return o})),n.d(t,"o",(function(){return a})),n.d(t,"i",(function(){return d})),n.d(t,"j",(function(){return l})),n.d(t,"l",(function(){return s})),n.d(t,"k",(function(){return f})),n.d(t,"c",(function(){return b})),n.d(t,"f",(function(){return m})),n.d(t,"n",(function(){return h})),n.d(t,"h",(function(){return j})),n.d(t,"b",(function(){return O})),n.d(t,"e",(function(){return g})),n.d(t,"a",(function(){return p})),n.d(t,"p",(function(){return v})),n.d(t,"q",(function(){return k}));var c=n("b775"),r={getRoleList:"/role/getRoleList",getAddMenuList:"/role/addGetMenuTree",getEditMenuList:"/role/editGetMenuTree",addRole:"/role/addRole",eidtRole:"/role/editRole",removeRole:"/role/removeRole",getMenuTree:"/menu/getMenuTree",addMenuTree:"/menu/addMenu",getMenuList:"/menu/getMenuList",editMenuTree:"/menu/editMenu",removeMenuTree:"/menu/removeMenu",getAccountList:"/users/getAccountList",addAccount:"/users/addAccount",delAccount:"/users/delAccount",accountStatusSet:"/users/accountStatusSet",resultPassWord:"/users/resultPassWord",editPassword:"/users/editPassword",editPasswordTesting:"/users/editPasswordTesting",roleAssignment:"/users/roleAssignment"};function u(e){return Object(c["a"])({url:r.getRoleList,method:"post",data:e})}function i(e){return Object(c["a"])({url:r.addRole,method:"post",data:e})}function o(e){return Object(c["a"])({url:r.eidtRole,method:"post",data:e})}function a(e){return Object(c["a"])({url:r.removeRole,method:"post",data:{id:e}})}function d(){return Object(c["a"])({url:r.getAddMenuList,method:"post"})}function l(e){return Object(c["a"])({url:r.getEditMenuList,method:"post",data:{id:e}})}function s(e){return Object(c["a"])({url:r.getMenuTree,method:"post",data:e})}function f(){return Object(c["a"])({url:r.getMenuList,method:"post"})}function b(e){return Object(c["a"])({url:r.addMenuTree,method:"post",data:e})}function m(e){return Object(c["a"])({url:r.editMenuTree,method:"post",data:e})}function h(e){return Object(c["a"])({url:r.removeMenuTree,method:"post",data:{id:e}})}function j(){return Object(c["a"])({url:r.getAccountList,method:"post"})}function O(e){return Object(c["a"])({url:r.addAccount,method:"post",data:e})}function g(e){return Object(c["a"])({url:r.delAccount,method:"post",data:{id:e}})}function p(e){return Object(c["a"])({url:r.accountStatusSet,method:"post",data:e})}function v(e){return Object(c["a"])({url:r.resultPassWord,method:"post",data:e})}function k(e){return Object(c["a"])({url:r.roleAssignment,method:"post",data:e})}},f405:function(e,t,n){"use strict";n("0ca7")}}]);