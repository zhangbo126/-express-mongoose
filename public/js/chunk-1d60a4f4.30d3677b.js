(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d60a4f4"],{a15b:function(e,t,n){"use strict";var r=n("23e7"),u=n("44ad"),c=n("fc6a"),o=n("a640"),a=[].join,i=u!=Object,l=o("join",",");r({target:"Array",proto:!0,forced:i||!l},{join:function(e){return a.call(c(this),void 0===e?",":e)}})},cf7c:function(e,t,n){"use strict";n.d(t,"m",(function(){return c})),n.d(t,"d",(function(){return o})),n.d(t,"g",(function(){return a})),n.d(t,"o",(function(){return i})),n.d(t,"i",(function(){return l})),n.d(t,"j",(function(){return s})),n.d(t,"l",(function(){return d})),n.d(t,"k",(function(){return f})),n.d(t,"c",(function(){return b})),n.d(t,"f",(function(){return j})),n.d(t,"n",(function(){return O})),n.d(t,"h",(function(){return m})),n.d(t,"b",(function(){return p})),n.d(t,"e",(function(){return h})),n.d(t,"a",(function(){return g})),n.d(t,"p",(function(){return v})),n.d(t,"q",(function(){return A}));var r=n("b775"),u={getRoleList:"/role/getRoleList",getAddMenuList:"/role/addGetMenuTree",getEditMenuList:"/role/editGetMenuTree",addRole:"/role/addRole",eidtRole:"/role/editRole",removeRole:"/role/removeRole",getMenuTree:"/menu/getMenuTree",addMenuTree:"/menu/addMenu",getMenuList:"/menu/getMenuList",editMenuTree:"/menu/editMenu",removeMenuTree:"/menu/removeMenu",getAccountList:"/users/getAccountList",addAccount:"/users/addAccount",delAccount:"/users/delAccount",accountStatusSet:"/users/accountStatusSet",resultPassWord:"/users/resultPassWord",editPassword:"/users/editPassword",editPasswordTesting:"/users/editPasswordTesting",roleAssignment:"/users/roleAssignment"};function c(e){return Object(r["a"])({url:u.getRoleList,method:"post",data:e})}function o(e){return Object(r["a"])({url:u.addRole,method:"post",data:e})}function a(e){return Object(r["a"])({url:u.eidtRole,method:"post",data:e})}function i(e){return Object(r["a"])({url:u.removeRole,method:"post",data:{id:e}})}function l(){return Object(r["a"])({url:u.getAddMenuList,method:"post"})}function s(e){return Object(r["a"])({url:u.getEditMenuList,method:"post",data:{id:e}})}function d(e){return Object(r["a"])({url:u.getMenuTree,method:"post",data:e})}function f(){return Object(r["a"])({url:u.getMenuList,method:"post"})}function b(e){return Object(r["a"])({url:u.addMenuTree,method:"post",data:e})}function j(e){return Object(r["a"])({url:u.editMenuTree,method:"post",data:e})}function O(e){return Object(r["a"])({url:u.removeMenuTree,method:"post",data:{id:e}})}function m(){return Object(r["a"])({url:u.getAccountList,method:"post"})}function p(e){return Object(r["a"])({url:u.addAccount,method:"post",data:e})}function h(e){return Object(r["a"])({url:u.delAccount,method:"post",data:{id:e}})}function g(e){return Object(r["a"])({url:u.accountStatusSet,method:"post",data:e})}function v(e){return Object(r["a"])({url:u.resultPassWord,method:"post",data:e})}function A(e){return Object(r["a"])({url:u.roleAssignment,method:"post",data:e})}},dc0a:function(e,t,n){"use strict";n.r(t);var r=n("f2bf"),u=Object(r["l"])("新增账号+"),c={class:"table-action"},o={key:0},a={key:1},i={key:2},l={key:3};function s(e,t,n,s,d,f){var b=Object(r["K"])("a-button"),j=Object(r["K"])("a-table"),O=Object(r["K"])("a-card"),m=Object(r["K"])("a-col"),p=Object(r["K"])("add-edit-account"),h=Object(r["K"])("definition-role"),g=Object(r["K"])("a-row");return Object(r["D"])(),Object(r["j"])(g,null,{default:Object(r["V"])((function(){return[Object(r["m"])(m,{span:24},{default:Object(r["V"])((function(){return[Object(r["m"])(O,null,{default:Object(r["V"])((function(){return[Object(r["m"])(b,{type:"primary",style:{margin:"10px 0px"},onClick:s.addAccount},{default:Object(r["V"])((function(){return[u]})),_:1},8,["onClick"]),Object(r["m"])(j,{dataSource:s.data,bordered:"",rowKey:"_id",scroll:{x:1300},columns:s.columns},{status:Object(r["V"])((function(e){var t=e.text;return[Object(r["m"])("div",null,Object(r["N"])(s.statusMapFilter(t)),1)]})),action:Object(r["V"])((function(e){e.text;var t=e.record;return[Object(r["m"])("ul",c,[Object(r["m"])("li",null,[Object(r["m"])("a",{onClick:function(e){return s.removeAccount(t._id)}}," 删除 ",8,["onClick"])]),0==t.status?(Object(r["D"])(),Object(r["j"])("li",o,[Object(r["m"])("a",{onClick:function(e){return s.setAccountStatus(t._id,1)}}," 启用 ",8,["onClick"])])):Object(r["k"])("",!0),1==t.status?(Object(r["D"])(),Object(r["j"])("li",a,[Object(r["m"])("a",{onClick:function(e){return s.setAccountStatus(t._id,0)}}," 禁用 ",8,["onClick"])])):Object(r["k"])("",!0),1==t.status?(Object(r["D"])(),Object(r["j"])("li",i,[Object(r["m"])("a",{onClick:function(e){return s.setRole(t)}}," 定义角色 ",8,["onClick"])])):Object(r["k"])("",!0),1==t.status?(Object(r["D"])(),Object(r["j"])("li",l,[Object(r["m"])("a",{onClick:function(e){return s.resultPass(t.id)}}," 重置密码 ",8,["onClick"])])):Object(r["k"])("",!0)])]})),_:1},8,["dataSource","columns"])]})),_:1})]})),_:1}),Object(r["m"])(p,{ref:"account",onRefresh:s.refresh},null,8,["onRefresh"]),Object(r["m"])(h,{ref:"role",onRefresh:s.refresh},null,8,["onRefresh"])]})),_:1})}var d=n("5530"),f=(n("159b"),n("a15b"),n("cf7c")),b=n("ed3b"),j=n("f64c"),O=n("c1df"),m=n.n(O);function p(e,t,n,u,c,o){var a=Object(r["K"])("a-input"),i=Object(r["K"])("a-form-item"),l=Object(r["K"])("a-form"),s=Object(r["K"])("a-modal");return Object(r["D"])(),Object(r["j"])(s,{visible:e.visible,"onUpdate:visible":t[4]||(t[4]=function(t){return e.visible=t}),width:600,"ok-text":"确认","cancel-text":"取消",title:1==e.type?"新增账号":"编辑账号",onOk:u.submitHandle,onCancel:u.cancel},{default:Object(r["V"])((function(){return[Object(r["m"])(l,{ref:"formRef",model:u.form,rules:u.rules,"label-col":{span:7},"wrapper-col":{span:14}},{default:Object(r["V"])((function(){return[Object(r["m"])(i,{ref:"userAccount",label:"账户名称",name:"userAccount"},{default:Object(r["V"])((function(){return[Object(r["m"])(a,{placeholder:"账户名称",style:{width:"220px"},value:u.form.userAccount,"onUpdate:value":t[1]||(t[1]=function(e){return u.form.userAccount=e})},null,8,["value"])]})),_:1},512),Object(r["m"])(i,{label:"联系方式",name:"phone"},{default:Object(r["V"])((function(){return[Object(r["m"])(a,{placeholder:"联系方式",style:{width:"220px"},value:u.form.phone,"onUpdate:value":t[2]||(t[2]=function(e){return u.form.phone=e}),valueModifiers:{trim:!0}},null,8,["value"])]})),_:1}),Object(r["m"])(i,{label:"邮箱",name:"email",required:""},{default:Object(r["V"])((function(){return[Object(r["m"])(a,{placeholder:"邮箱",type:"email",style:{width:"220px"},value:u.form.email,"onUpdate:value":t[3]||(t[3]=function(e){return u.form.email=e}),valueModifiers:{trim:!0}},null,8,["value"])]})),_:1})]})),_:1},8,["model","rules"])]})),_:1},8,["visible","title","onOk","onCancel"])}var h=n("1da1"),g=(n("96cf"),{userAccount:[{required:!0,message:"请输入",trigger:["change","blur"],type:"string"},{message:"账号名由英文或者数字6-18位组成",pattern:/^[a-zA-Z\d]{6,18}$/,trigger:["change","blur"],type:"string"}],phone:[{required:!0,message:"请输入",trigger:["change","blur"],type:"string"},{message:"手机格式不正确",pattern:/^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{8}$/,trigger:["change","blur"],type:"string"}],email:[{required:!0,message:"请输入",trigger:["change","blur"],type:"string"},{message:"邮箱格式不正确",pattern:/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,trigger:["change","blur"],type:"string"}]}),v={setup:function(e,t){var n=Object(r["H"])({userAccount:null,phone:null,email:null,id:null}),u=Object(r["I"])(),c=Object(r["H"])({type:1,visible:!1,menuList:[]}),o=function(){u.value.validate().then((function(){1!=c.type?Object(f["f"])(n).then((function(e){i(e)})):Object(f["b"])(n).then((function(e){i(e)}))}))},a=function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:c.type=1,O();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(e){1==e.code&&(j["a"].success("操作成功"),t.emit("refresh"),c.visible=!1)},l=function(e,t){return t.value.toLowerCase().indexOf(e.toLowerCase())>=0},s=function(e,t){return t.children[0].children.toLowerCase().indexOf(e.toLowerCase())>=0},b=function(){u.value.resetFields()},O=function(){c.visible=!0,Object.assign(n,{userAccount:null,phone:null,email:null,id:null})};return Object(d["a"])(Object(d["a"])({cancel:b,form:n,rules:g},Object(r["Q"])(c)),{},{formRef:u,submitHandle:o,showAddModal:a,filterOption:l,filterOptionPartent:s})}};v.render=p;var A=v;n("b0c0");function k(e,t,n,u,c,o){var a=Object(r["K"])("a-form-item"),i=Object(r["K"])("a-checkbox"),l=Object(r["K"])("a-checkbox-group"),s=Object(r["K"])("a-form"),d=Object(r["K"])("a-modal");return Object(r["D"])(),Object(r["j"])(d,{visible:e.visible,"onUpdate:visible":t[2]||(t[2]=function(t){return e.visible=t}),width:600,"ok-text":"确认","cancel-text":"取消",title:"定义角色",onOk:u.submitHandle,onCancel:u.cancel},{default:Object(r["V"])((function(){return[Object(r["m"])(s,{ref:"formRef",model:u.form,rules:u.rules,"label-col":{span:7},"wrapper-col":{span:14}},{default:Object(r["V"])((function(){return[Object(r["m"])(a,{ref:"userAccount",label:"账户名称"},{default:Object(r["V"])((function(){return[Object(r["l"])(Object(r["N"])(u.form.userAccount),1)]})),_:1},512),Object(r["m"])(a,{label:"用户角色",name:"userRole"},{default:Object(r["V"])((function(){return[Object(r["m"])(l,{value:u.form.userRole,"onUpdate:value":t[1]||(t[1]=function(e){return u.form.userRole=e})},{default:Object(r["V"])((function(){return[(Object(r["D"])(!0),Object(r["j"])(r["b"],null,Object(r["J"])(e.roleList,(function(e){return Object(r["D"])(),Object(r["j"])(i,{key:e._id,value:e._id},{default:Object(r["V"])((function(){return[Object(r["l"])(Object(r["N"])(e.name),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["value"])]})),_:1})]})),_:1},8,["model","rules"])]})),_:1},8,["visible","onOk","onCancel"])}var R={userRole:[{required:!0,message:"请选择",trigger:["change","blur"],type:"array"}]},w={setup:function(e,t){var n=Object(r["H"])({userAccount:null,userRole:null,id:null}),u=Object(r["I"])(),c=Object(r["H"])({visible:!1,roleList:[]}),o=function(){u.value.validate().then((function(){Object(f["q"])(n).then((function(e){l(e)}))}))},a=function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var r,u,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t._id,u=t.userRole,c=t.userAccount,s(),e.next=4,i();case 4:return e.next=6,Object.assign(n,{userAccount:c,userRole:u,id:r});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){Object(f["m"])().then((function(e){1==e.code&&(c.roleList=e.data)}))},l=function(e){1==e.code&&(j["a"].success("操作成功"),t.emit("refresh"),c.visible=!1)},s=function(){c.visible=!0,Object.assign(n,{userAccount:null,userRole:null,id:null})},b=function(){u.value.resetFields()};return Object(d["a"])(Object(d["a"])({form:n,rules:R},Object(r["Q"])(c)),{},{formRef:u,submitHandle:o,showModal:a,cancel:b})}};w.render=k;var x=w,y={0:"已停用",1:"使用中"},M=[{title:"角色名称",dataIndex:"userAccount",align:"center",width:140},{title:"状态",dataIndex:"status",align:"center",width:100,slots:{customRender:"status"}},{title:"创建时间",dataIndex:"createTime",align:"center",width:220},{title:"用户角色",dataIndex:"userRoleName",align:"center"},{title:"联系方式",dataIndex:"phone",align:"center",width:120},{title:"邮箱",dataIndex:"email",align:"center",width:190},{title:"操作",dataIndex:"action",align:"center",width:130,fixed:"right",slots:{customRender:"action"}}],_={components:{AddEditAccount:A,DefinitionRole:x},setup:function(){var e=Object(r["I"])([]),t=Object(r["I"])(null),n=Object(r["I"])(null),u=Object(r["H"])({queryInfo:{pageSize:10,pageNumber:1}}),c=function(){Object(f["h"])(u.queryInfo).then((function(t){e.value=t.data,e.value.forEach((function(e){e.userRoleName=e.userRoleName.join(",")}))}))},o=function(){c()},a=function(){t.value.showAddModal()},i=function(e){b["a"].confirm({title:"确认要执行操作吗?",okText:"确认",cancelText:"取消",onOk:function(){Object(f["e"])(e).then((function(e){1==e.code&&(j["a"].success("操作成功"),c())}))}})},l=function(e,t){b["a"].confirm({title:"确认要执行操作吗?",okText:"确认",cancelText:"取消",onOk:function(){Object(f["a"])({id:e,status:t}).then((function(e){1==e.code&&(j["a"].success("操作成功"),c())}))}})},s=function(e){n.value.showModal(e)},O=function(e){b["a"].confirm({title:"确认要执行操作吗?",okText:"确认",cancelText:"取消",onOk:function(){Object(f["p"])(e).then((function(e){1==e.code&&(j["a"].success("操作成功"),c())}))}})};Object(r["A"])((function(){c()}));var p=function(e){return y[e]};return Object(d["a"])(Object(d["a"])({columns:M,statusMap:y,data:e},Object(r["Q"])(u)),{},{statusMapFilter:p,refresh:o,getList:c,addAccount:a,removeAccount:i,account:t,role:n,moment:m.a,setAccountStatus:l,setRole:s,resultPass:O})}};_.render=s;t["default"]=_}}]);