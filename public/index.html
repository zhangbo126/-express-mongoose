<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
    <title>Document</title>
    <style>
        #app {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 98vh;
        }

        .form {
            width: 400px;
        }
    </style>
</head>

<body>
    <div id="app">
        <div class="form">
            <el-form :model="form" status-icon :rules="rules" ref="form" label-width="100px" class="demo-form">
                <el-form-item label="账号" prop="userAccount">
                    <el-input v-model="form.userAccount" autocomplete="off"></el-input>
                </el-form-item>
                <el-form-item label="密码" prop="passWord">
                    <el-input type="password" v-model="form.passWord" autocomplete="off"></el-input>
                </el-form-item>

                <el-form-item>
                    <el-button style="width:100%" type="primary" @click="submitForm('form')">登陆</el-button>
                </el-form-item>
            </el-form>
            <el-button @click="TokenDemo">TOKEN</el-button>
        </div>

    </div>
    <script src="https://unpkg.com/vue/dist/vue.js"></script>
    <!-- import JavaScript -->
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <script>
        new Vue({
            el: '#app',
            data: function () {
                return {
                    form: {
                        userAccount: 'ZHANG_666',
                        passWord: '123456',
                    },
                    rules: {
                        userAccount: [
                            { required: true, message: '请输入', trigger: ['change', 'blur'] },
                        ],
                        passWord: [
                            { required: true, message: '请输入', trigger: ['change', 'blur'] },
                        ],

                    }
                }
            },
            methods: {
                TokenDemo() {
                    axios({
                        method: 'POST',
                        url: 'http://192.168.101.112:9999/users/addAccount',
                        headers: {
                            authorization: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoi5rSZIiwiaWQiOiJmaGN5YTA1Z2R3MDAwMDAwIiwiaWF0IjoxNjI0OTUyNTUyLCJleHAiOjE2MjUzMTI1NTJ9.P0DlT2Fe-OS-8-1cy8irntCP-E3xG-J0qwUxFNC2j1U'
                        },
                        data: {
                            name: Math.floor(Math.random() * 11212)
                        }
                    })
                },
                submitForm(formName) {
                    this.$refs[formName].validate((valid) => {
                        if (valid) {

                            axios({
                                method: 'post',
                                url: 'http://192.168.101.112:9999/users/login',
                                data: this.form,

                            }).then(res => {

                                this.$message(res.data.message);
                            })
                        } else {
                            console.log('error submit!!');
                            return false;
                        }
                    });
                },
            },
        })
    </script>




</body>

</html>